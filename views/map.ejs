<% include header.ejs %>

<script type="text/javascript">
	document.body.onload = function() { alert(current_whiteboards); }

	/*
		Pre-loads the images so they can be drawn in order.
	*/
	function loadImages() {
		var sources = ["campus_map.png", "icon.png"]
		var images = {};
		var loadedImages = 0;

		//alert(current_whiteboards);
		//alert(current_whiteboards.length);

		current_whiteboards = [[10, 1], [100, 100], [52, 70]];

		for (var src in sources) {
			images[src] = new Image();
			images[src].onload = function() {
				if(++loadedImages >= 2) {
					draw(images, current_whiteboards);
				}
			};
			images[src].src = sources[src];
		}
	}

	/*
		Draws the map and all the current whiteboard locations onto the canvas.
	*/
	function draw(images, current_whiteboards) {
		var canvas = document.getElementById('canvas');
		var ctx = canvas.getContext('2d');

		ctx.canvas.width = window.innerWidth;
		ctx.canvas.height = window.innerHeight;

		ctx.drawImage(images[0], 0, 0, window.innerWidth, window.innerHeight);

		for (var i = 0; i < current_whiteboards.length; i++) {
			var x = current_whiteboards[i][0];
			var y = current_whiteboards[i][1];

			ctx.drawImage(images[1], x + 10, y + 20, 20, 20);
		}
	}
	</script>
</head>

<body onload="loadImages();">
	<canvas id="canvas"></canvas>

<% include footer.ejs %>